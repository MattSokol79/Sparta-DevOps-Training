# Day 1
## Introduction to Databases

DoD - Definition of Done used in Agile/SCRUM where the user/epic stories have a set of criteria that needs to be met before the task
is officially finished.

Objectives
- Understand db tech
- Build SQL database
- Insert some common data types into DB
- List various database tools in common use
- COmpare and explain the different database structure

### What is a database?
Can be stuff like an Excel spreadsheet

Somewhere where you gather information - Paper records, 

**Definition** - A structured set of data held in a computer, especially one that is accessible in various ways (commonly, CLOUD) 

- We must be able to structure tables to contain the right type of information so that we can query it


### Tables
We can create tables by using common themes e.g. for employee info:

1. First Name
2. Last Name
3. Birthday
4. Profession
5. Status
6. Email Address


- Columns
- Rows
- Table - Predefined format of rows and columns
- DBMS - DataBase Management System allows a computer to perform database functions of storing, retrieving, adding, deleting and
modifying data.

### Types of Databases
- Flat-file Database - huge excel
- Relational Database - gives you the ability to separate masses of data into numerous tables. They are linked to each other
through the use of keys
- Big Data - E.g. MongoDB, Vertica etc. Used for Data Analytics and Business Intelligence. Digital age and Internet of Things


### Relational Databases
Relational Databases contain connected data! The tables should be **related**

I.e. connect tables by using key words from other tables to link them together and find relevant info

- You DO NOT want duplicated data in numerous different tables as that takes space and is not needed

![](DIAGRAM OF THE THINGS BELOW)

- **One to One** - NOT used that much, but can be used anyway. E.g. table of user (user_id, First and last name and email) connected to table of
NI number with (ID, user_id and NI_number)
- **One to Many** - E.g. Table of user (user_id, first and last name and email) connected to a table of Book_table (book_id, user_id, title,
book_content). Then this can be branched as 1 USER could have written many BOOKS thats why its branched to other tables.
- **Many to Many** - Checking out books system. Example where you have books_table and checkouts_table related to checking out 
books. E.g. checkouts_table contains (checkout_id, user_id(who), book_id(what), date). So one user can have checked out many books, and then
one book could have been checked out many times. 

- Standard WEB product DB- One user can write many ebooks. An ebook belongs to 1 user. Users can check out many books
Books can be checked out many times

### Primary Key
- The primary key inquely identifies each record in the table
- Most tables should have a primary key
- Each table can have more than one column which is part of its primary key e.g. Order No. + Order Line No.
- It can either be an attribute that is guaranteed to be uniqe (such as NI number) or it can be generated by the DBMS
- The DBMS will enforce the uniqueness of the Primary Key, ont allowing repeated records to exist in the table

**Primary Key Constraints** - IMPORTANT
- A primary key must be unique
- Must always have an entry (cannot be blank or null)
- Value must never change
- each table may have a maximum of one Primary Key

**2 TYPES of Primary Keys:**
1. 1 - Name, job (SIMPLE)
2. Compound/Composite Key e.g. Order No. and a Line No. so EXAMPLE: AMAZON ORDER can have a large order with multiple products 
(line no.)

### Foreign Key - (there is a lot of information here, but it is really simple)
A primary key that exists in a separate/secondary table. Builds the relationship between the two.

E.g. One to many example (User_table has a primary key of user_id) and then the foreign
key is the user_id in the book_table as it simply references the user_id from the first table. 

- Foreign keys ensure that the row of information in Table A corresponds to the correct row of information in Table B
- The constraint is used to prevent actions that would destroy links between tables
- YOU CANT CREATE A BOOK WITHOUT A FOREIGN KEY
- There is no Uniqueness constraint for Foreign Key
- A table can have any number of foreign keys
- A row cannot be deleted from a reference table if it is in use via a foreign key
- So you define a user_id e.g. name etc. And then can use this user_id in another table to reference that person, this is a foreign
key. An then another thing can be defined in the second table and then that key can be used in another table which becomes a foreign
key.

### Designing a Database
**Database Tools**
- Microsoft Access
- SQL Server Editions (WHAT WE WILL USE)
- PostgreSQL - OPEN SOURCE i.e. completely free
- SQLite - Small database 
- MySQL - VERY USED OPEN SOURCE
- Redis - OPEN SOURCE
- MongoDB - Large Database, not only SQL so it doesnt have limits of foreign keys
- Oracle
- And others..

## Structured Query Language
- Data manipulation langauge
- Data definition 
- Data control language
- Transaction control language

Most of the time we will work on DML, we wont really look at DCL or TCL.

**DML:**
- Select
- Insert
- Update
- Delete

**DDL:**
- Create
- Alter
- Drop
- Truncate

**DCL:**
- Grant
- Revoke

**TCL:**
- Commit
- Rollback
- Savepoint

### Creating a Database in Azure
Reference the my_db_matt database

### Data Types
- VARCHAR(10) - MEANS (Up to 10 characters). Different lengths of characters, records MAX size.
- CHARACTER or CHAR - Data must be at a fixed length.
- INT - holds a whole number/integer value positive or negative.
- DATE or TIME or DATETIME - Stores Date, Time or both date and time.
- DECIMAL or NUMERIC - fixed precision and scale numbers
- BINARY - used to store binary data such as an image or file
- FLOAT - scientific use (very large numbers)
- BIT - Equvalent to binary (0, 1, null)

Exercise, what data type are the following examples:
- Post Code - VARCHAR(8), 8 characters long in case the post code is 7 characters + a space
- Phone number - VARCHAR(11) or CHAR, 11 as the length of the phone number
- Birth Date - DATE
- Weight in kg - DECIMAL(6, 4) this means 6 digits total, 4 digits after the decimal point so a value of e.g. 67.4929
- Comments - VARCHAR(MAX), MAX meaning up to 8k characters. Normal VARCHAR is up to 255 characters


Example:
```
ALTER TABLE film_table;
ADD release_date DATE;
```
- Can be used to RENAME, MODIFY, ADD or DROP columns.

```
ALTER TABLE film_table;
ALTER COLUMN file_name VARCHAR(N) NOT NULL
```
### Inserting Data into Tables
```
INSERT INTO film_table
(
film_name, film_type
)

VALUES
(
'The Hulk', 'Action'
);
```

VARCHAR, CHAR and DATE all use quotes for their VALUES

### NULL and Default
Null means nothing, absence of data. Default, by default it will go to specific value

A value can be NULL but NULL never equals NULL because NULL is an undefined value

```
CREATE TABLE film_table(
	film_name VARCHAR(10) NOT NULL,
	film_type VARCHAR(6) NOT NULL DEFAULT 0);
```
So a value cannot be NULL but it will be set to 0

```
CREATE TABLE people(
person_id INT NOT NULL IDENTITY PRIMARY KEY,
person_name VARCHAR(255) NOT NULL,
height DECIMAL(7,3),
is_happy BIT
);
```

This makes the person_id a primary key with integer data type and cannot be null

```
UPDATE people
	SET person_name='Mike'
	WHERE person_id=2
```
This essentially changes the name of the person with person_id=2
If you need to change the contents of a table use the UPDATE statement
Beware of leaving out the WHERE clause, this will update the entire table.

```
DELETE FROM people
WHERE person_id = 3;
```
DELETES a row with the person_id = 3


## Syntax Info with Examples

- `SP_HELP <table_name>`
  - Shows the structure of a table
  - Example: `SP_HELP sample`

- `CREATE DATABASE <table_name>`
  - Creates a database with a specified name
  - Example: `CREATE DATABASE my_db`

- `CREATE TABLE <table_name> {column type}`
  - Creates a table with a specified column name and type
  - Example: `CREATE TABLE sample { example_name VARCHAR(10) }`

- `USE <table_name>`
  - Uses specified database for some data manipulation
  - Example: `USE my_db`

- `SELECT <object> FROM <table_name>`
  - Selects a specific object / column / row from a specific table
  - Example: `SELECT * FROM sample`

- `ALTER TABLE <table_name> ALTER <column/row> <name> <type>`
  - Modifies the table's column or row to a different data type
  - Example: `ALTER TABLE sample ALTER COLUMN some_name VARCHAR(255)`

- `INSERT INTO <table_name> (column_1, column_2) VALUES ('value_1', 'value_2')`
  - Inserts some data into the columns
  - Example: `INSERT INTO sample (name, surname) VALUES ('John', 'Smith')`

- `UPDATE <table_name> SET <column> = <new value> WHERE <column> = <existing value>`
  - Updates data in a specific table based on value in a column
  - Example: `UPDATE sample SET name = 'Dev' WHERE name = 'Hubert'`

- `DELETE FROM <table_name> WHERE <column> = <value>`
  - Removes a row based on a value in a column
  - Example: `DELETE FROM sample WHERE name = 'Dev'

- `DROP <table_name>`
  - Deletes an entire table
  - Example `DROP sample`
